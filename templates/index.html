<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>📰 네이버 뉴스검색기</title>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; background: #f9f9f9; margin: 40px; }
        h1 { color: #333; }
        .msg { color: #555; margin-bottom: 12px; font-size: 1.06em; }
        .now { color: #888; font-size: 0.97em; }
        table { width: 100%; border-collapse: collapse; margin-top: 18px; }
        th, td { border: 1px solid #ddd; padding: 8px; font-size: 1em; }
        th { background: #f2f2f2; }
        .matched-key { color: #0052cc; font-weight: bold; }
        .matched-count { color: #f04848; font-weight: bold; }
        .press-major { color: #1a8917; font-weight: bold; }
        .desc { color: #666; font-size: 0.98em; }
    </style>
</head>
<body>
    <h1>📰 네이버 뉴스검색기</h1>
    <form method="post" action="/">
        <label>검색 유형:</label>
        <select name="search_mode">
            <option value="전체" {% if search_mode == '전체' %}selected{% endif %}>전체</option>
            <option value="주요언론사만" {% if search_mode == '주요언론사만' %}selected{% endif %}>주요언론사만</option>
            <option value="동영상만" {% if search_mode == '동영상만' %}selected{% endif %}>동영상만</option>
        </select>
        &nbsp;&nbsp;
        <label>키워드(쉼표로 구분):</label>
        <input type="text" name="keywords" style="width:400px;" value="{{ keyword_input or '' }}" placeholder="육군, 국방, 외교, ...">
        <button type="submit">🔍 검색</button>
        <span class="now">🕒 현재시각: {{ now }}</span>
    </form>

    {% if msg %}
        <div class="msg">{{ msg }}</div>
    {% endif %}

    {% if final_articles %}
        <table>
            <tr>
                <th>제목</th>
                <th>언론사</th>
                <th>시간</th>
                <th>키워드</th>
                <th>원본</th>
            </tr>
            {% for art in final_articles %}
            <tr>
                <td>
                    <div>{{ art.title }}</div>
                    <div class="desc">{{ art.desc }}</div>
                </td>
                <td>
                    {% if art.press in ["조선일보", "연합뉴스", "한겨레", "중앙일보", "MBN", "KBS", "SBS", "YTN", "동아일보", "세계일보", "문화일보", "뉴시스", "네이버", "다음", "국민일보", "국방일보", "이데일리", "뉴스1", "JTBC"] %}
                        <span class="press-major">{{ art.press }}</span>
                    {% else %}
                        {{ art.press }}
                    {% endif %}
                </td>
                <td>{{ art.pubdate_str }}</td>
                <td>
                    {% for k in art.matched_list %}
                        <span class="matched-key">{{ k }}</span>{% if not loop.last %}, {% endif %}
                    {% endfor %}
                    <span class="matched-count">({{ art.matched_count }})</span>
                </td>
                <td>
                    <a href="{{ art.url }}" target="_blank">바로가기</a>
                </td>
            </tr>
            {% endfor %}
        </table>
    {% endif %}
</body>
</html>
