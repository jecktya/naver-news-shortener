<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ğŸ“° ë„¤ì´ë²„ ë‰´ìŠ¤ê²€ìƒ‰ê¸°</title>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; background: #f9f9f9; margin: 40px; }
        h1 { color: #333; }
        .msg { color: #555; margin-bottom: 12px; font-size: 1.06em; }
        .now { color: #888; font-size: 0.97em; }
        table { width: 100%; border-collapse: collapse; margin-top: 18px; }
        th, td { border: 1px solid #ddd; padding: 8px; font-size: 1em; }
        th { background: #f2f2f2; }
        .matched-key { color: #0052cc; font-weight: bold; }
        .matched-count { color: #f04848; font-weight: bold; }
        .press-major { color: #1a8917; font-weight: bold; }
        .desc { color: #666; font-size: 0.98em; }
    </style>
</head>
<body>
    <h1>ğŸ“° ë„¤ì´ë²„ ë‰´ìŠ¤ê²€ìƒ‰ê¸°</h1>
    <form method="post" action="/">
        <label>ê²€ìƒ‰ ìœ í˜•:</label>
        <select name="search_mode">
            <option value="ì „ì²´" {% if search_mode == 'ì „ì²´' %}selected{% endif %}>ì „ì²´</option>
            <option value="ì£¼ìš”ì–¸ë¡ ì‚¬ë§Œ" {% if search_mode == 'ì£¼ìš”ì–¸ë¡ ì‚¬ë§Œ' %}selected{% endif %}>ì£¼ìš”ì–¸ë¡ ì‚¬ë§Œ</option>
            <option value="ë™ì˜ìƒë§Œ" {% if search_mode == 'ë™ì˜ìƒë§Œ' %}selected{% endif %}>ë™ì˜ìƒë§Œ</option>
        </select>
        &nbsp;&nbsp;
        <label>í‚¤ì›Œë“œ(ì‰¼í‘œë¡œ êµ¬ë¶„):</label>
        <input type="text" name="keywords" style="width:400px;" value="{{ keyword_input or '' }}" placeholder="ìœ¡êµ°, êµ­ë°©, ì™¸êµ, ...">
        <button type="submit">ğŸ” ê²€ìƒ‰</button>
        <span class="now">ğŸ•’ í˜„ì¬ì‹œê°: {{ now }}</span>
    </form>

    {% if msg %}
        <div class="msg">{{ msg }}</div>
    {% endif %}

    {% if final_articles %}
        <table>
            <tr>
                <th>ì œëª©</th>
                <th>ì–¸ë¡ ì‚¬</th>
                <th>ì‹œê°„</th>
                <th>í‚¤ì›Œë“œ</th>
                <th>ì›ë³¸</th>
            </tr>
            {% for art in final_articles %}
            <tr>
                <td>
                    <div>{{ art.title }}</div>
                    <div class="desc">{{ art.desc }}</div>
                </td>
                <td>
                    {% if art.press in ["ì¡°ì„ ì¼ë³´", "ì—°í•©ë‰´ìŠ¤", "í•œê²¨ë ˆ", "ì¤‘ì•™ì¼ë³´", "MBN", "KBS", "SBS", "YTN", "ë™ì•„ì¼ë³´", "ì„¸ê³„ì¼ë³´", "ë¬¸í™”ì¼ë³´", "ë‰´ì‹œìŠ¤", "ë„¤ì´ë²„", "ë‹¤ìŒ", "êµ­ë¯¼ì¼ë³´", "êµ­ë°©ì¼ë³´", "ì´ë°ì¼ë¦¬", "ë‰´ìŠ¤1", "JTBC"] %}
                        <span class="press-major">{{ art.press }}</span>
                    {% else %}
                        {{ art.press }}
                    {% endif %}
                </td>
                <td>{{ art.pubdate_str }}</td>
                <td>
                    {% for k in art.matched_list %}
                        <span class="matched-key">{{ k }}</span>{% if not loop.last %}, {% endif %}
                    {% endfor %}
                    <span class="matched-count">({{ art.matched_count }})</span>
                </td>
                <td>
                    <a href="{{ art.url }}" target="_blank">ë°”ë¡œê°€ê¸°</a>
                </td>
            </tr>
            {% endfor %}
        </table>
    {% endif %}
</body>
</html>
